{
  "_id": "_design/api",
  "_rev": "9-66754b6ca552d2f740686d62051b9472",
  "language": "javascript",
  "views": {
    "groups": {
      "map": "function(doc) {\n  if (doc.type == \"group\")\n    emit(doc.name, 1);\n}",
      "reduce": "function(keys, values, rereduce) {\n  return sum(values);\n}"
    },
    "discussions": {
      "map": "function(doc) {\n  if (doc.type == \"discussion\")\n    emit(doc.group.id, doc.name);\n}"
    },
    "messages": {
      "map": "function(doc) {\n  if (doc.type == \"message\")\n    emit(doc.discussion.id, doc.body);\n}"
    }
  }
}
